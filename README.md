学习过程中的笔记，逐步从语雀迁移至Github。<br/>
本仓库暂时定位为书籍等资料的笔记，对技术官方文档的翻译和笔记可能会新开一个仓库
 
 # 主要贡献 major contribution
 - 对内容进行风格统一的标记（加粗、下划线、引号）突出重点
 - 按照某种 ‘主题’ 对原资料进行总结
 - 以 ‘问题’ 为导向的总结
 - 对晦涩的 ‘长句’ 或原资料中未解释的 ‘概念’ ，借助大模型添加合适的 ‘注解’ 和 ‘例子’

## 风格统一的标记
针对资料作者给出的‘经验性的指导’，对‘必须’、‘建议’、‘通常’等字眼进行了强调

> 商店维度是本案例研究中的**主要**地理维度。每家商店都可以被视为一个位置。你可以将商店按任何地理属性进行汇总，比如美国的邮政编码、县和州。**与普遍看法相反**，美国的城市和州并不构成层次结构。由于许多州都有同名的城市，所以你可能需要在商店维度中包含一个城市 - 州属性。

> 商店也可能按‘内部组织层次结构’进行汇总，包括商店区域和地区。这两种不同的商店层次结构都可以很容易地在维度中表示，因为对于单个商店行来说，地理和组织层次结构都有明确的定义。

> 注意：在维度表中表示多个层次结构**并不罕见**。多个层次结构中的属性名称和值应该是唯一的。


## 按照某种 ‘主题’ 对原资料进行总结
> **日期维度**
几乎可以肯定，它存在于每一个维度模型中。
与大多数其他维度不同，你**可以**提前构建日期维度表
...


## 以 ‘问题’ 为导向的总结



## 添加合适的 ‘注解’ 和 ‘例子’

[^3.3.1-4]: 举例

在零售销售的业务场景中，涉及time-of-day作为维度或事实的相关表和查询如下：

**time-of-day作为维度表**：

- **维度表结构示例**：

| TIME-of-day维度表               | 说明                                               |
| ------------------------------- | -------------------------------------------------- |
| time-of-day键（PK）             | 唯一标识每个时间间隔的代理键                       |
| 具体时间间隔（如00:00 - 00:15） | 代表离散的时间区间，用于精确区分不同时段           |
| 时段描述（如凌晨、早高峰等）    | 对该时间间隔的文字描述，方便理解和使用             |
| 时段分组（如夜间、白天等）      | 根据业务需求对时间间隔进行的分组，用于更宏观的分析 |

   - **查询示例**：假设业务用户想了解早高峰时段（如07:00 - 09:00）内不同产品的销售情况。以零售销售事实表和time-of-day维度表为例，SQL查询可能如下：

```sql
SELECT p.product_description, SUM(rs.extended_sales_dollar_amount) AS total_sales
FROM retail_sales_fact rs
JOIN time_of_day_dimension tod ON rs.time_of_day_key = tod.time_of_day_key
JOIN product_dimension p ON rs.product_key = p.product_key
WHERE tod.time_interval BETWEEN '07:00:00' AND '09:00:00'
GROUP BY p.product_description;
```

**time-of-day作为事实表中的事实**：

- **事实表结构示例**：在零售销售事实表中添加时间-of-day相关的日期/时间戳列。

| 零售销售事实表                    | 说明                                   |
| --------------------------------- | -------------------------------------- |
| 日期键（FK）                      | 关联日期维度表的外键                   |
| 产品键（FK）                      | 关联产品维度表的外键                   |
| 商店键（FK）                      | 关联商店维度表的外键                   |
| 销售数量                          | 产品的销售数量                         |
| 扩展销售金额                      | 销售金额的扩展值                       |
| 交易时间戳（时间-of-day作为事实） | 记录交易发生的具体时间，可精确到时分秒 |

   - **查询示例**：若想计算每笔交易的时长（假设已知交易结束时间戳和开始时间戳），SQL查询可能如下：

```sql
SELECT rs.pos_transaction_number,
       (rs.end_transaction_timestamp - rs.start_transaction_timestamp) AS transaction_duration
FROM retail_sales_fact rs;
```

在实际应用中，根据业务需求的不同，time-of-day的处理方式及相关的表结构和查询会有所变化。

- time-of-day作为维度表更适合用于对时间进行分组和分析的场景；
- 作为事实表中的事实则更侧重于记录具体时间信息，用于计算时间相关的指标 。 

