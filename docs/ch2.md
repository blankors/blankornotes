# 2 Kimball Dimensional Modeling Techniques Overview



## Fundamental Concepts 基本概念

本节中的技术在每次维度设计时‘都’必须予以考虑。本书几乎每一章都会提及或阐释本节中的概念。

### Gather Business Requirements and Data Realities 收集业务需求和数据实际情况

在开展维度建模工作之前，团队需要了解业务需求，以及底层源数据的实际情况。通过与‘业务代表’沟通，依据关键绩效指标、重要业务问题、决策过程和支持性分析需求来了解他们的‘目标’，从而揭示业务需求。与此同时，通过与源系统专家交流并进行高级数据剖析，评估数据的可行性，以此揭示数据实际情况。

> Chapter 1 DW/BI and Dimensional Modeling Primer, p 5 
>
> Chapter 3 Retail Sales, p 70 
>
> Chapter 11 Telecommunications, p 297 
>
> Chapter 17 Lifecycle Overview, p 412 
>
> Chapter 18 Dimensional Modeling Process and Tasks, p 431
>
> Chapter 19 ETL Subsystems and Techniques,p 444

### Collaborative Dimensional Modeling Workshops 协作式维度建模研讨会

维度模型应与业务领域的主题专家subject matter experts和数据治理代表data governance representatives合作设计。数据建模师负责主导，但模型应通过与业务代表的一系列高度互动的研讨会逐步形成。这些研讨会为与业务方进一步明确需求提供了机会。维度模型不应由不完全了解业务及其需求的人员单独设计，协作至关重要！

### Four-Step Dimensional Design Process 四步维度设计流程

设计维度模型时的四个关键决策包括：

1. 选择业务流程。
2. 声明粒度。
3. 识别维度。
4. 识别事实。

在协作建模会议期间，通过考虑业务需求以及底层源数据的实际情况来确定这些问题的答案。在确定业务流程、粒度、维度和事实后，设计团队确定表名、列名、示例域值和业务规则。业务数据治理代表必须参与这一详细设计活动，以确保业务部门的认可。

### Business Processes 业务流程

业务流程（直译的话是商业流程）是组织开展的运营活动[^]，例如下订单、处理保险索赔、为学生注册课程或每月对每个账户进行快照。业务流程事件会生成或捕获绩效指标，这些指标会转化为事实表中的事实。大多数事实表聚焦于单个业务流程的结果。选择流程很重要，因为它定义了特定的设计目标，并允许声明粒度、维度和事实。每个业务流程对应企业数据仓库总线矩阵中的一行。

[^]:业务流程如何划分也是个不小的问题。

如何划分业务流程

“如何划分业务流程”，这是什么方面的知识，有什么书籍或者教程推荐

### Grain 粒度

声明粒度是维度设计中的关键步骤。粒度精确确定了单个事实表行所代表的内容。粒度声明对设计具有约束作用。在选择维度或事实之前必须声明粒度，因为每个候选维度或事实都必须与粒度一致。这种一致性确保了所有维度设计的统一性，这对商业智能（BI）应用程序的性能和易用性至关重要。原子粒度指的是特定业务流程捕获数据的最低级别。我们强烈建议从关注原子粒度数据入手，因为它能够应对不可预测的用户查询；汇总粒度对于性能调优很重要，但它预先假定了业务的常见问题。每个提议的事实表粒度都会生成一个单独的物理表；不同的粒度不能混合在同一个事实表中。

### Dimensions for Descriptive Context 用于描述性上下文的维度

维度提供了围绕业务流程事件的 “谁、什么、在哪里、何时、为什么以及如何” 等上下文信息。维度表包含 BI 应用程序用于<u>对事实进行筛选和分组的描述性属性</u>。牢记事实表的粒度后，就可以识别所有可能的维度。只要有可能，与给定事实行相关联的维度应具有单一值。
维度表有时被称为数据仓库的 “灵魂”，因为它们包含使 DW/BI 系统能够用于业务分析的入口点和描述性标签。由于维度表是用户 BI 体验的驱动因素，因此在数据治理和开发方面会投入大量精力。

### Facts for Measurements 用于度量的事实

事实是业务流程事件产生的度量结果，**几乎总是**数值型的。单个事实表行与事实表粒度所描述的度量事件存在一一对应关系。因此，事实表对应于一个可观察的物理事件，而不是特定报告的需求。在事实表中，只允许与声明的粒度一致的事实存在。例如，在零售销售交易中，产品的销售数量和扩展价格是合适的事实，而商店经理的工资则不被允许。

### Star Schemas and OLAP Cubes 星型模式和OLAP立方体

星型模式是部署在关系数据库管理系统（RDBMS）中的维度结构。它们的特点是由事实表通过主键 / 外键关系与相关的维度表链接。在线分析处理（OLAP）立方体是在多维数据库中实现的维度结构；其内容可以与关系星型模式等效，或者更常见的是从关系星型模式派生而来。OLAP 立方体包含维度属性和事实，但它是通过比 SQL 具有更多分析功能的语言（如 XMLA 和 MDX）来访问的。OLAP 立方体被列入基本技术列表，是因为它**通常是**维度 DW/BI 系统部署的最后一步，或者可能作为基于更原子化的关系星型模式的聚合结构而存在。

### Graceful Extensions to Dimensional Models 维度模型的灵活扩展

维度模型在数据关系发生变化时具有很强的适应性。以下所有的变化都可以在不改变现有 BI 查询或应用程序，且不影响查询结果的情况下实现。

- 与现有事实表粒度一致的新事实，可以通过<u>创建新列</u>的方式添加到事实表中[^2.1.8-1]。
- 在不改变事实表粒度的前提下，通过创建新的外键列，可以向现有事实表中添加维度。
- 可以通过创建新列，向现有维度表中添加属性。
- 通过向现有维度表中添加属性，并重述更低粒度的事实表，同时注意保留事实表和维度表中的现有列名，可使事实表的粒度更细化为原子粒度。

[^2.1.8-1]: 在零售销售的场景中，假设最初设计的零售销售事实表包含 “销售数量”“扩展折扣金额”“扩展销售金额”“扩展成本金额” 等事实列，其粒度为每笔销售交易中的单个产品行记录。随着业务发展和分析需求的变化，企业想要分析每笔交易中产品的利润贡献度，而利润贡献度可以通过 “扩展销售金额 - 扩展成本金额” 计算得出。此时，就可以依据 “与现有事实表粒度一致的新事实，可以通过创建新列的方式添加到事实表中” 这一原则，在零售销售事实表中新增 “利润贡献金额” 列来记录该事实。这样，新添加的事实与原事实表的粒度一致，都是基于每笔销售交易中的单个产品，且无需对现有 BI 查询或应用程序进行修改，也不会影响原有查询结果 。

## Basic Fact Table Techniques 基本事实表技术

本节中的技术适用于**所有**事实表。本书几乎每一章都有事实表的示例。

### Fact Table Structure 事实表结构

事实表包含现实世界中运营度量事件产生的<u>数值度量</u>。在最低粒度下，事实表中的一行对应一个度量事件，反之亦然。因此，事实表的基本设计完全基于实际活动，不受最终可能生成的报告的影响。除了数值度量，事实表总是包含其相关维度的外键，以及可选的退化维度键和日期 / 时间戳。事实表是查询产生的计算和动态聚合的**主要目标**。

### Additive, Semi-Additive, Non-Additive Facts 可加性、半可加性、不可加性事实

事实表中的数值度量分为三类。最灵活且最有用的事实是完全可加的；可加性度量可以在与事实表相关的任何维度上进行求和。半可加性度量可以在某些维度上求和，但并非所有维度；余额金额就是常见的半可加性事实，因为它们在除时间维度之外的所有维度上都是可加的。最后，有些度量是完全不可加的，例如比率。对于不可加性事实，一种可行的方法是，在可能的情况下，存储不可加性度量的完全可加组件，并在计算最终的不可加性事实之前，将这些组件相加以生成最终的答案集。这种最终计算通常在 BI 层或 OLAP 立方体中完成。

### Nulls in Fact Tables 事实表中的空值

在事实表中，空值度量的表现较为**正常**。聚合函数（SUM、COUNT、MIN、MAX 和 AVG）在处理空值事实时都能做出 “正确的处理”。但是，事实表的外键中**必须避免**出现空值，因为这些空值会自动导致参照完整性违规a referential integrity violation。对于空的外键，相关的维度表必须有一个默认行（和代理键）来表示未知或不适用的情况。

### Conformed Facts 一致性事实

如果同一度量出现在不同的事实表中，若要将它们进行比较或一起计算，必须确保这些事实的技术定义是相同的。如果不同的事实定义一致，那么一致性事实应该具有相同的名称；但如果它们不兼容，则应该使用不同的名称，以提醒业务用户和 BI 应用程序。

### Transaction Fact Tables 事务事实表

事务事实表中的一行对应于某个时间和空间点上的度量事件。原子事务粒度的事实表是维度最多、表达能力最强的事实表；这种强大的维度性使得对事务数据的切片和切块分析达到最大程度。事务事实表可能是密集的，也可能是稀疏的，因为只有在进行度量时才会存在行记录。这些事实表总是包含每个相关维度的外键，并且可选地包含精确的时间戳和退化维度键。度量的数值事实必须与事务粒度一致。

### Periodic Snapshot Fact Tables 周期快照事实表

周期快照事实表中的一行汇总了在一个标准时间段（如一天、一周或一个月）内发生的许多度量事件。其粒度是时间段，而不是单个事务。周期快照事实表通常包含许多事实，因为任何与事实表粒度一致的度量事件都是允许的。这些事实表的外键分布均匀且密集，因为即使在该时间段内没有活动发生，通常也会在事实表中插入一行，其中每个事实列的值为零或空值。

### Accumulating Snapshot Fact Tables 累积快照事实表

累积快照事实表中的一行汇总了在一个过程的开始和结束之间的可预测步骤中发生的度量事件。具有定义明确的起点、标准中间步骤和定义明确的终点的流程或工作流过程，如订单履行或索赔处理，可以使用这种类型的事实表进行建模。在事实表中，每个关键过程步骤都有一个日期外键。例如，与订单行对应的累积快照事实表中的单个行，在订单行创建时插入。随着流程的推进，会再次访问并更新累积事实表行。在三种类型的事实表中，累积快照事实表行的这种持续更新是独一无二的。除了与每个关键过程步骤相关的日期外键，累积快照事实表还包含其他维度的外键，并且可选地包含退化维度。它们通常包括与粒度一致的数值滞后度量，以及里程碑完成计数器。

### Factless Fact Tables 无事实事实表

虽然大多数度量事件会捕获数值结果，但也有可能该事件仅仅记录了一组维度实体在某个时刻的组合情况。例如，学生在某一天上课的事件可能没有记录数值事实，但包含日历日、学生、教师、地点和课程等外键的事实行是明确的。同样，客户通信也是事件，但可能没有相关的度量。无事实事实表也可用于分析未发生的事情。这些查询**通常分为**两部分：一个无事实覆盖表，包含所有可能发生的事件的可能性；一个活动表，包含实际发生的事件。当从覆盖表中减去活动表的内容时，结果就是未发生的事件集。

### Aggregate Fact Tables or OLAP Cubes 聚合事实表或OLAP立方体

聚合事实表是对原子事实表数据进行简单的数值汇总，其构建目的仅为加快查询性能。这些聚合事实表应与原子事实表同时提供给 BI 层，以便 BI 工具在查询时能顺利选择合适的聚合级别。这个过程被称为聚合导航，它必须是开放的，这样每个报表编写器、查询工具和 BI 应用程序都能获得相同的性能提升。一组设计合理的聚合应像数据库索引一样，能加速查询性能，但不会被 BI 应用程序或业务用户直接接触到。聚合事实表包含指向缩减的一致性维度的外键，以及通过对更原子化的事实表中的度量进行求和而创建的聚合事实。最后，带有汇总度量的聚合 OLAP 立方体通常以与关系型聚合相同的方式构建，但 OLAP 立方体是供业务用户直接访问的。

### Consolidated Fact Tables 合并事实表

如果来自多个业务流程的事实能够在相同粒度下进行表达，将它们合并到一个单独的合并事实表中通常会很方便。例如，销售实际数据可以与销售预测数据合并到一个事实表中，相较于使用单独的事实表来构建跨钻分析应用程序，这种方式能使对比分析实际数据与预测数据的任务变得更加简单和快速。合并事实表会增加 ETL 处理的负担，但能减轻 BI 应用程序的分析负担。对于那些经常需要一起分析的跨流程指标，应该考虑使用合并事实表。

## Basic Dimension Table Techniques 基本维度表技术

### Dimension Table Structure 维度表结构



每个维度表都有一个单一的主键列。这个主键会作为外键嵌入到任何与之相关联的事实表中，在这些事实表中，<u>维度行的描述性上下文</u>对于事实表的行来说是完全准确适配的。维度表通常是宽表、扁平化的非规范化表，包含许多低基数的文本属性。虽然操作型代码和指标可以被当作属性来处理，但最有效的维度属性是填充了详细描述的那些属性。维度表的属性是来自查询和商业智能（BI）应用程序的约束和分组规范的主要目标。报表上的描述性标签通常是维度属性的域值。 

> Chapter 1 DW/BI and Dimensional Modeling Primer , p 13
>
> Chapter 3 Retail Sales , p 79
>
> Chapter 11 Telecommunications , p 301



### Dimension Surrogate Keys 维度代理键

维度表的设计是让其中一列充当唯一的主键。这个主键**不能是**操作系统the operational system的自然键 natural key，因为当随时间追踪变化时，对于那个自然键来说会存在多个维度行[^]。此外，一个维度的自然键可能由不止一个源系统创建，而且这些自然键可能不兼容，或者管理不善。数据仓库/商业智能（DW/BI）系统需要对所有维度的主键进行管控；你**不应**使用明确的自然键或附加了日期的自然键，而应该为每个维度创建<u>匿名的整数主键</u>anonymous integer primary keys。这些维度代理键**是**简单的整数，每次需要新键时，从数值1开始按顺序分配。日期维度不受代理键规则的限制；这个高度可预测且稳定的维度可以使用更有意义的主键。请参阅“日历日期维度”这一节。 

> Chapter 1 DW/BI and Dimensional Modeling Primer, p 13 
>
> Chapter 3 Retail Sales, p 79
>
> Chapter 11 Telecommunications , p 301



随着时间追踪变化时，一个自然键会存在多个维度行，主要原因有两点：

 - **业务实体属性变化**：在实际业务场景中，业务实体的属性会发生变化。以产品为例，产品的所属部门可能会调整，在操作型系统里，这一变化可能不会改变产品的自然键，但从维度表的角度，如果要准确记录历史变化，采用类型2（Type 2）的处理方式就会为该产品添加新的维度行 。假设产品A最初属于部门X，自然键为A001，之后调整到部门Y，在记录变化时就会插入新的维度行，两行都对应自然键A001，这样就出现了一个自然键对应多个维度行的情况。
 - **源系统不一致**：一个维度的自然键可能由多个源系统创建。不同的源系统对业务实体的定义和管理方式有差异，产生的自然键可能存在不兼容或管理不善的问题。在合并来自不同源系统的数据时，即使是代表同一业务实体的自然键，也可能因为编码规则、格式等不一致，被当作不同的键来处理，从而在维度表中为同一个实际的业务实体创建多个维度行，对应到同一个自然键。 



### Natural, Durable, and Supernatural Keys 自然键、持久键和超自然键

由操作源系统创建的自然键受<u>数据仓库/商业智能（DW/BI）系统无法控制的业务规则</u>的影响。例如，如果一名员工辞职后又被重新聘用，其员工编号（自然键）可能会发生变化。当数据仓库希望为该员工设置一个单一的键时，就必须创建一个新的持久键，这个键在这种情况下是持续有效且不会改变的。这种键有时被称为持久超自然键。**最佳**的持久键应具有一种独立于原始业务流程的格式，因此应该是从1开始按顺序分配的简单整数。随着时间推移，由于员工的个人信息发生变化，可能会有多个代理键与该员工相关联，但持久键永远不会改变。 





### Drilling Down 向下钻取



### Degenerate Dimensions 退化维度



### Denormalized Flattened Dimensions 非规范化扁平维度

### Multiple Hierarchies in Dimensions 维度中的多个层次结构

### Flags and Indicators as Textual Attributes 作为文本属性的标志和指标

### Null Attributes in Dimensions 维度中的空属性

### Calendar Date Dimensions 日历日期维度

日历日期维度几乎会附加到每个事实表上，以便通过人们熟悉的日期、月份、财务期间和日历上的特殊日子来浏览事实表。你肯定不想在SQL中计算复活节的日期，而是希望在日历日期维度中查找。日历日期维度通常包含许多描述性属性，如周数、月份名称、财务期间和国家法定节假日指示符。为便于分区，日期维度的主键**可以**更具意义，例如用代表YYYYMMDD的整数，而不是顺序分配的代理键。不过，日期维度表需要一个特殊的行来表示未知或待定的日期。当需要更高的精度时，**可以**在事实表中添加一个单独的日期/时间戳。日期/时间戳不是维度表的外键，而是一个独立的列。如果业务用户根据诸如时段分组或班次编号等时间属性进行筛选或分组，那么就**需要**在事实表中添加一个单独的时间维度外键。 

### Role-Playing Dimensions 角色维度

一个物理维度可以在事实表中被多次引用，且每次引用都与该维度在逻辑上不同的角色相关联。例如，一个事实表可能会有多个日期，每个日期都由指向日期维度的外键来表示。至关重要的是，每个外键**都应**指向日期维度的一个独立视图，这样这些引用才是相互独立的。这些独立的维度视图（具有唯一的属性列名称）被称为角色。 

### Junk Dimensions 垃圾维度

事务性业务流程通常会产生一些各种各样的、基数较低的标志和指标。与其为每个标志和属性分别创建单独的维度，不如创建一个将它们组合在一起的单一 “垃圾维度”。在模式中，这个维度通常被标记为事务概况维度，它无需是所有属性可能值的笛卡尔积，而只需包含源数据中实际出现的属性值组合。

### Snowflaked Dimensions 雪花维度

当维度表中的层次关系被规范化时，低基数属性会以辅助表的形式出现，这些辅助表通过属性键与基础维度表相连。当对维度表中的所有层次结构都重复这一过程时，就会创建出<u>一种具有特征性的多层结构</u>[^]，这种结构被称为雪花模式。尽管雪花模式能准确地表示层次数据，但你应该**避免**使用雪花模式，因为业务用户很难理解和浏览雪花模式，而且它还可能对查询性能产生负面影响。一个扁平化的非规范化维度表所包含的信息与雪花状维度表的信息完全相同。



以下是一个雪花模式的例子，以电商公司的销售数据为例进行说明：

- **核心维度表 - 商品表（Product）**：包含商品的基本信息，如商品编号（ProductID）、商品名称（ProductName）、品牌（Brand）等。
- **一级扩展维度表 - 商品分类表（ProductCategory）**：存储商品的分类信息，设有分类编号（CategoryID）、分类名称（CategoryName）以及外键商品编号（ProductID），通过商品编号与商品表关联，这样可以表示商品属于哪个分类，例如“手机”属于“数码产品”分类。
- **二级扩展维度表 - 分类层级表（CategoryHierarchy）**：用于进一步描述商品分类的层次关系，有层级编号（HierarchyID）、上级分类编号（ParentCategoryID）、下级分类编号（ChildCategoryID）等字段。通过这个表可以体现出分类的层级结构，比如“数码产品”是“电子产品”的下级分类，“手机”又是“数码产品”的下级分类。

在这个例子中，商品表是核心维度表，商品分类表和分类层级表是围绕商品表展开的扩展维度表，它们之间通过键相互关联，形成了类似雪花的结构。这种结构虽然能清晰地表示商品及其分类的层次关系，但如果业务人员想要查询某个品牌下所有商品在各个分类层级中的销售情况，就需要关联多个表，查询过程会比较复杂，而且性能可能受到影响。

### Outrigger Dimensions 外扩维度

一个维度可以包含对另一个维度表的引用。例如，银行账户维度可以引用一个单独的维度，该维度表示账户的开户日期。这些对二级维度的引用被称为 “外伸维度”。外伸维度是可行的，但应该谨慎使用。在大多数情况下，维度之间的关联关系应下放到事实表中，在事实表中，两个维度都以独立的外键形式呈现。

## Integration via Conformed Dimensions 通过一致性维度进行集成

## Dealing with Slowly Changing Dimension Attributes 处理缓慢变化的维度属性

以下部分介绍了处理缓慢变化维度（SCD）属性的基本方法。在同一个维度表中，存在使用不同变化跟踪技术change tracking techniques来处理的属性，这是相当常见的情况。

### Type 0: Retain Original 类型0 保留原始值

在类型 0 的情况下，维度属性值永远不会改变，因此事实数据总是按照这个原始值进行分组。类型 0 适用于任何标记为 “原始” 的属性，例如客户的原始信用评分或持久标识符。它也适用于日期维度中的大多数属性。

### Type 1: Overwrite 类型1 覆盖

在类型 1 的情况下，维度行中的旧属性值会被新值覆盖；类型 1 的属性始终反映最新的赋值，因此这种技术会破坏历史数据。尽管这种方法易于实现，并且不会创建额外的维度行，但必须注意，受此更改影响的聚合事实表和联机分析处理（OLAP）立方体需要重新计算。

### Type 2: Add New Row 类型2 添加新行

类型 2 的变化会在维度中添加一行带有更新后属性值的新行。这就需要将维度的主键扩展到超出自然键或持久键的范畴，因为可能会有多行来描述每个成员。
当为某个维度成员创建新行时，会分配一个新的代理主键，并从更新时刻起将其用作所有事实表中的外键，直到后续的更改创建一个新的维度键和更新后的维度行。
对于类型 2 的变化，维度行中至少应添加三列：1）行生效日期或日期 / 时间戳；2）行过期日期或日期 / 时间戳；3）当前行指示器。

### Type 3: Add New Attribute 类型3 添加新属性



### Type 4: Add Mini-Dimension 类型4 添加迷你维度



### Type 5: Add Mini-Dimension and Type 1 Outrigger 类型5 添加迷你维度和类型1外扩



### Type 6: Add Type 1 Attributes to Type 2 Dimension 类型6 向类型2维度添加类型1属性



### Type 7: Dual Type 1 and Type 2 Dimensions 类型7 双类型1和类型2维度



## Dealing with Dimension Hierarchies 处理维度层次结构



### Fixed Depth Positional Hierarchies 固定深度位置层次结构

### Slightly Ragged/Variable Depth Hierarchies 略不规则/可变深度层次结构

### Ragged/Variable Depth Hierarchies with Hierarchy Bridge Tables 具有层次结构桥接表的不规则/可变深度层次结构

### Ragged/Variable Depth Hierarchies with Pathstring Attributes 具有路径字符串属性的不规则/可变深度层次结构

## Advanced Fact Table Techniques 高级事实表技术

### Fact Table Surrogate Keys 事实表代理键

### Centipede Fact Tables 蜈蚣型事实表

### Numeric Values as Attributes or Facts 作为属性或事实的数值

### Lag/Duration Facts 滞后/持续时间事实

### Header/Line Fact Tables 标题/行事实表

### Allocated Facts 分摊事实

### Profit and Loss Fact Tables Using Allocations 使用分摊的损益事实表

### Multiple Currency Facts 多货币事实

### Multiple Units of Measure Facts 多度量单位事实

### Year-to-Date Facts 年初至今事实

### Multipass SQL to Avoid Fact-to-Fact Table Joins 避免事实表之间连接的多遍SQL

### Timespan Tracking in Fact Tables 事实表中的时间跨度跟踪

### Late Arriving Facts 迟到事实

## Advanced Dimension Techniques 高级维度技术

### Dimension-to-Dimension Table Joins 维度到维度表连接

### Multivalued Dimensions and Bridge Tables 多值维度和桥接表

### Time Varying Multivalued Bridge Tables 时变多值桥接表

### Behavior Tag Time Series 行为标签时间序列

### Behavior Study Groups 行为研究组

### Aggregated Facts as Dimension Attributes 聚合事实作为维度属性

### Dynamic Value Bands 动态值带

### Text Comments Dimension 文本注释维度

### Multiple Time Zones 多个时区

### Measure Type Dimensions 度量类型维度

### Step Dimensions 步骤维度

### Hot Swappable Dimensions 热插拔维度

### Abstract Generic Dimensions 抽象通用维度

### Audit Dimensions 审计维度

### Late Arriving Dimensions 迟到维度

## Special Purpose Schemas 特殊目的模式

### Supertype and Subtype Schemas for Heterogeneous Products 异构产品的超类型和子类型模式

### Real-Time Fact Tables 实时事实表

### Error Event Schemas 错误事件模式 

#### 2.3.8 雪花型维度

当维度表中的层次关系被规范化时，低基数属性会作为二级表，通过属性键与基础维度表相连。当对维度表中的所有层次关系都进行这样的处理时，就会创建出一种特征性的多层次结构，这被称为雪花型结构。虽然雪花型结构能准确表示层次数据，但你应该避免使用它，因为业务用户很难理解和导航雪花型结构，而且它还会对查询性能产生负面影响。扁平化的非规范化维度表包含的信息与雪花型维度表完全相同。

在第3章“零售销售”和第11章“电信”中，会进一步讨论雪花型维度，在第20章“ETL系统设计与开发过程和任务”中，也会涉及相关内容。 

